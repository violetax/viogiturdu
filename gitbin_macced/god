#!/bin/bash

function whatis() {
	cuseco=$(basename $0)
 echo -e "\033[38;5;118m${cuseco}	‚áí 	\\033[38;5;11mtype:\\033[38;5;118mgeus ‚Üí vim ‚áí  select, array con mapfile, SECONDS var, log function"
 echo -e "\033[38;5;195m Select an audio from geus playsists.., and [38;5;118mdo[38;5;11m ‚≠ê[38;5;118mit!!!  \\033[38;5;212m‚ù§Ô∏èÔ∏è \\n\\033[38;5;43m\tüëâ\t\033[38;5;11m${cuseco} -$o\033[0m
    "
}

## SOURCES
source Opte.fu
source Asksure.fu
source GralGetops.fu # snippet ‚Üí sops
source Logtime.fu 

gvallwaysfile=/Users/violetagonzalezgarcia/gitclones/bin/geush/auxiliares/vallways/geus-vallways.aux
source ${gvallwaysfile}
source ${funcsdir}/echonthego.fu
source ${funcsdir}/editvlcrc.fu
source ${funcsdir}/erabaki_hizkuntza.fu
gvonthegofile=/Users/violetagonzalezgarcia/gitclones/bin/geush/auxiliares/vonthego/geus-vonthego.aux
source ${gvonthegofile}


erabaki_hizkuntza
getvlcspeed

##DIRECTORIES
##FILES
tlogfile=${transdir}/.transcripciones.log
tralogfile="${transdir}/${clipname%.mp3}.transcript"
#refdatefile...
#VARIABLES
myspeed=false


### MAIN
while getopts ":ehs" o; do 
	case "${o}" in
		e)
			opte
			exit
			;;
		h)
			#whatis
			echo -e "PENDING whatis!! üî• "
			exit
			;;
		s)
			editvlcspeed 
			;;	
		\?)
			echo "invalid option: -$OPTARG"
			exit
			;;
	esac
done
shift $((OPTIND-1))

#si no hay option s, aplicar la funct editspeed con $1==1
#[[ ${myspeed} = false ]] && editspeed 1 

mapfile -t playlists < <( find ${playldir}/pl-dictation* -exec basename {} \; | sort -r) # -type f -newer ${refdatefile}... 

echo -e "\033[38;5;212müíïüíïüíïüíïüíï Happy \\033[38;5;195m manual writing!!!!!!!!!!!!"
echo -e "\033[38;5;212müíïüíïüíïüíïüíï\\033[38;5;195m or typing \\033[38;5;212müíïüíïüíï\\033[38;5;190müíïüíïüíïüíïüíï\\033[38;5;212müíïüíïüíï!!!!!!!!\\033[38;5;190m"    
echo -e "\033[38;5;195m For T \\033[38;5;11m‚≠ê \\033[38;5;195m Y\\033[38;5;11m‚≠ê\\033[38;5;195m P\\033[38;5;11m‚≠ê\\033[38;5;195m I\\033[38;5;11m‚≠ê\\033[38;5;195m N\\033[38;5;11m‚≠ê\\033[38;5;195m G  Open another tab... ponte c√≥moda, and \\033[38;5;118mRUN \\033[38;5;9mrtra \033[0m"

COLUMNS=12
echo -e "\033[38;5;195m üëâ speed üö®üö¶üö®üö¶üö®üö¶üö®üö¶üö®üö¶üö®üö¶ üëâ üëâ üëâ üëâ \033[38;5;118m${vlcspeed} \033[38;5;195m " 
select godaudio in $(echo -e "${playlists[@]}" )
do
	echo -e "\033[38;5;14m"  
	tail -1 ${playldir}/${godaudio} 
    if asksure; then
		SECONDS=0
		nvlc ${playldir}/${godaudio} 
		#FILE=${playldir}/${transcript} 
		dtime=$(logtime ${SECONDS})
		#echo -e "TLOG ${godaudio} ‚ú® $(date +%D) ‚Üí ${dtime}" > ${tlogfile}
		#echo -e "\033[38;5;195m TLOG \\033[38;5;14m¬ª\\033[38;5;118m${godaudio} \\033[38;5;11m‚ú® \\033[38;5;195m $(date +%D) ‚Üí ${dtime}" 
		#echo -e "\033[38;5;212mWrite a comment????"
		commentwork "${godaudio}" "${dtime}" "${tlogfile}"
			[[ -e "${tralogfile}" ]] && echo "üí´ See typed transcript @ ${tralogfile} ‚≠ê ‚≠ê ‚≠ê " >> ${tlogfile}
	fi
	echo -e "\033[38;5;11müí´ \\033[38;5;118mAGUR!!!!!!!!!!!!!!!!\\033[38;5;11m üí´"
	break
done
# ‚ú® 
