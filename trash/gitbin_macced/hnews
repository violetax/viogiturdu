#!/bin/bash

function whatis() {
	cuseco=$(basename $0)
 echo -e "\033[38;5;118m${cuseco}	‚áí 	\\033[38;5;11mtype:\\033[38;5;118mhugo ‚áí  hugo new file en \$codir or \$co; var'ed main dirs del current cdv"
 echo -e "	\\033[38;5;195m Lo que de momento creo que hace:
	\033[38;5;208m ‚àô desde cualquier lugar permite escoger un subdir en content .
   	‚àô  pero si ya est√° en content ‚Üí entonces escoges un subdir dentro de donde est√©s .
		‚àô  \033[38;5;212m y crea un file ah√≠ .
   	‚àô\033[38;5;208mCon la opci√≥n d ‚Üí \\033[38;5;212mcrea un dir .
	  	‚àô\033[38;5;208mtambi√©n en o bien content, o donde est√©s dentro de content 
   
	\033[38;5;11m‚≠ê\\033[38;5;195m ALGOESTRELLADO \\033[38;5;11m‚≠ê\\033[38;5;195m \\033[38;5;212m‚ù§Ô∏èÔ∏è \\n\\033[38;5;43m\tüëâ\t\033[38;5;11m${cuseco} -$o\033[0m"
}

## SOURCES
##VARS-FILES
##FUNCTIONS
source Opte.fu
source Asksure.fu
source GralGetops.fu 
##DIRECTORIES
currentd=$(pwd)
dbb=$(grep ' bb=' /Users/violetagonzalezgarcia/gitclones/.bash_aliases | awk -F= '{print $2}')
pbasedir=$(grep "${dbb}=" /Users/violetagonzalezgarcia/gitclones/.bash_aliases | awk -F ' ' '{print $3}')
basedir=$(echo $pbasedir | tr "'" " " | xargs)
#echo -e "\033[38;5;11mbasedir ‚Üí ${basedir}hola "; exit
car="${basedir}/archetypes"
co="${basedir}/content"
cdat="${basedir}/data"
cla="${basedir}/layouts"
cres="${basedir}/resources"
csta="${basedir}/static"
cth="${basedir}/themes/hugo-theme-learn"

##FILES
#VARIABLES
createdir=false
hucom="hugo new"


### MAIN
while getopts ":ehd" o; do
	case ${o} in
		e)
			opte
			exit
			;;
		h)
			whatis
			exit
			;;
		d)
			createdir=true 
			;;
		\?)
			echo -e "Nein nein nein option ‚Üí ${o}"
			exit
			;;
	esac
done
shift $((OPTIND-1))

cd ${basedir} 
if [[ ! $1 ]]; then
	echo -e "‚≠ê\033[38;5;118m WHERE first (then what)???"   
	if [[ "${currentd}" =~ "content"   ]]; then
		basewhere=${currentd} 
	else
		basewhere="${co} -maxdepth 1"  			
	fi
#echo -e "\033[38;5;11mbasewhere ‚Üí ${basewhere} "; exit
	select sd in $(find ${basewhere} -type d | awk -F "/" '{print $NF}')
	do
		subdi=${sd} 
		break
    done	
 	
	echo -e "‚ú® \033[38;5;195m WHAT????"
	if [[ ${createdir} == true ]]; then
		echo -e "\033[38;5;11m DIR ‚Üí \\033[38;5;195m " 
		read ndir
		mkdir ${co}/${subdi}/${ndir}  
		subdi="${co}/${subdi}/${ndir}"
	fi

	echo -e "\033[38;5;11m FILE ‚Üí \\033[38;5;195m " 
	read dnewfile
	hnewco="${subdi}/${dnewfile}"  
else
	hnewco=$1
fi

if [[ ! ${hnewco} ]]; then
   ${hucom} ${hnewco} 
   sleep 2
   #HEREEEEEEEEEEEEEEEEEEEEEE
   find ${co} -name $(basename ${hnewco} )  -exec vim +$ {} \;
else
	echo -e "\033[38;5;118m ${hnewco}  already exists!!!!!!!!!!!!!!"
fi	

cd ${currentd}   
